---
// Blog Slider component - Conectado a Strapi
import type { SlideAfiliacion } from '../lib/strapi';
import { getStrapiImageUrl } from '../lib/strapi';

interface Props {
	slides?: SlideAfiliacion[];
}

const { slides: strapiSlides = [] } = Astro.props;

// Fallback a slides estáticos si no hay datos de Strapi
const defaultItems = [
	{
		image: '/images/img_acc-01.jpg',
		title: 'ES USTED AUTÓNOMO',
		link: '/afiliacionee_trabajadores',
		description: ''
	},
	{
		image: '/images/img_acc_02.jpg',
		title: 'USTED ES UN EMPLEADO',
		link: '/afiliacionee_trabajadores',
		description: ''
	},
	{
		image: '/images/img_acc_03.jpg',
		title: 'USTED ES EMPRESARIO',
		link: '/afiliacionee_empresas',
		description: ''
	},
	{
		image: '/images/img_acc_13.jpg',
		title: 'SOLICITUD DE CARNÉ',
		link: '#',
		description: ''
	}
];

// Usar slides de Strapi si están disponibles, sino usar los por defecto
const items = strapiSlides.length > 0
	? strapiSlides.map(slide => ({
			image: getStrapiImageUrl(slide.imagen.url),
			title: slide.titulo,
			link: slide.enlace,
			description: slide.descripcion || ''
		}))
	: defaultItems;
---

<div class="blog-slide">
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<div id="blog-slider" class="owl-carousel">
					{items.map(item => (
						<div class="post-slide">
							<div class="pic">
								<img src={item.image} alt={item.title} loading="lazy">
								<ul class="post-category">
									<li><a href={item.link}>{item.title}</a></li>
								</ul>
							</div>
						</div>
					))}
				</div>
			</div>
		</div>
		<hr>
	</div>
</div>

<script>
	// Se inicializará Owl Carousel desde los scripts del layout
	// o se puede migrar a Swiper.js en el futuro
</script>
