---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import PartnersCarousel from '../../../components/PartnersCarousel.astro';
import { getSocios } from '../../../lib/strapi';
import { getLangFromUrl, useTranslations, getLocalizedPath } from '../../../i18n/utils';

export const prerender = false;

export async function getStaticPaths() {
  return [
    { params: { lang: 'fr' } },
    { params: { lang: 'en' } },
    { params: { lang: 'pt' } }
  ];
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const socios = await getSocios();
---

<BaseLayout
  title={t('penalties.pageTitle')}
  description={t('penalties.pageDescription')}
  currentPath={getLocalizedPath('/empleadores/penas-sanciones', lang)}
>
  <!-- Page Header -->
  <div class="full-title">
    <div class="container">
      <br>
      <h1 class="text_blanc">{t('penalties.title')}</h1>
      <br>
      <div class="breadcrumb-main">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href={getLocalizedPath('/', lang)}>{t('penalties.breadcrumbHome')}</a></li>
          <li class="breadcrumb-item"><a href={getLocalizedPath('/empleadores', lang)}>{t('penalties.breadcrumbEmployers')}</a></li>
          <li class="breadcrumb-item active">{t('penalties.breadcrumbPenalties')}</li>
        </ol>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container mt-5 mb-5">
    <div class="row">
      <div class="col-lg-8">
        <!-- Introducción -->
        <section class="content-section">
          <div class="section-header">
            <i class="fas fa-gavel"></i>
            <h2>{t('penalties.legalFrameworkTitle')}</h2>
          </div>
          <p class="lead">{t('penalties.legalFrameworkLead')}</p>
          <p>{t('penalties.legalFrameworkText')}</p>
        </section>

        <!-- Tipos de Infracciones -->
        <section class="content-section">
          <div class="section-header">
            <i class="fas fa-exclamation-triangle"></i>
            <h2>{t('penalties.infractionTypesTitle')}</h2>
          </div>

          <div class="infraction-card">
            <div class="infraction-header leve">
              <i class="fas fa-info-circle"></i>
              <h3>{t('penalties.minorInfractions')}</h3>
            </div>
            <div class="infraction-body">
              <ul>
                <li>{t('penalties.minorInfraction1')}</li>
                <li>{t('penalties.minorInfraction2')}</li>
                <li>{t('penalties.minorInfraction3')}</li>
                <li>{t('penalties.minorInfraction4')}</li>
              </ul>
              <div class="sancion-info">
                <strong>{t('penalties.penaltyLabel')}</strong> {t('penalties.minorPenalty')}
              </div>
            </div>
          </div>

          <div class="infraction-card">
            <div class="infraction-header grave">
              <i class="fas fa-exclamation-circle"></i>
              <h3>{t('penalties.seriousInfractions')}</h3>
            </div>
            <div class="infraction-body">
              <ul>
                <li>{t('penalties.seriousInfraction1')}</li>
                <li>{t('penalties.seriousInfraction2')}</li>
                <li>{t('penalties.seriousInfraction3')}</li>
                <li>{t('penalties.seriousInfraction4')}</li>
                <li>{t('penalties.seriousInfraction5')}</li>
              </ul>
              <div class="sancion-info">
                <strong>{t('penalties.penaltyLabel')}</strong> {t('penalties.seriousPenalty')}
              </div>
            </div>
          </div>

          <div class="infraction-card">
            <div class="infraction-header muy-grave">
              <i class="fas fa-ban"></i>
              <h3>{t('penalties.verySeriousInfractions')}</h3>
            </div>
            <div class="infraction-body">
              <ul>
                <li>{t('penalties.verySeriousInfraction1')}</li>
                <li>{t('penalties.verySeriousInfraction2')}</li>
                <li>{t('penalties.verySeriousInfraction3')}</li>
                <li>{t('penalties.verySeriousInfraction4')}</li>
                <li>{t('penalties.verySeriousInfraction5')}</li>
                <li>{t('penalties.verySeriousInfraction6')}</li>
              </ul>
              <div class="sancion-info">
                <strong>{t('penalties.penaltyLabel')}</strong> {t('penalties.verySeriousPenalty')}
              </div>
            </div>
          </div>
        </section>

        <!-- Recargos por Mora -->
        <section class="content-section">
          <div class="section-header">
            <i class="fas fa-percent"></i>
            <h2>{t('penalties.latePaymentTitle')}</h2>
          </div>
          <p>{t('penalties.latePaymentIntro')}</p>

          <div class="table-responsive">
            <table class="mora-table">
              <thead>
                <tr>
                  <th>{t('penalties.delayPeriod')}</th>
                  <th>{t('penalties.applicableSurcharge')}</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>{t('penalties.delay1Month')}</td>
                  <td>{t('penalties.surcharge1Month')}</td>
                </tr>
                <tr>
                  <td>{t('penalties.delay1to3Months')}</td>
                  <td>{t('penalties.surcharge1to3Months')}</td>
                </tr>
                <tr>
                  <td>{t('penalties.delay3to6Months')}</td>
                  <td>{t('penalties.surcharge3to6Months')}</td>
                </tr>
                <tr>
                  <td>{t('penalties.delayOver6Months')}</td>
                  <td>{t('penalties.surchargeOver6Months')}</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="alert-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <strong>{t('penalties.importantNote')}</strong> {t('penalties.surchargeNote')}
          </div>
        </section>

        <!-- Procedimiento Sancionador -->
        <section class="content-section">
          <div class="section-header">
            <i class="fas fa-list-ol"></i>
            <h2>{t('penalties.procedureTitle')}</h2>
          </div>

          <div class="proceso-timeline">
            <div class="timeline-item">
              <div class="timeline-number">1</div>
              <div class="timeline-content">
                <h4>{t('penalties.step1Title')}</h4>
                <p>{t('penalties.step1Text')}</p>
              </div>
            </div>

            <div class="timeline-item">
              <div class="timeline-number">2</div>
              <div class="timeline-content">
                <h4>{t('penalties.step2Title')}</h4>
                <p>{t('penalties.step2Text')}</p>
              </div>
            </div>

            <div class="timeline-item">
              <div class="timeline-number">3</div>
              <div class="timeline-content">
                <h4>{t('penalties.step3Title')}</h4>
                <p>{t('penalties.step3Text')}</p>
              </div>
            </div>

            <div class="timeline-item">
              <div class="timeline-number">4</div>
              <div class="timeline-content">
                <h4>{t('penalties.step4Title')}</h4>
                <p>{t('penalties.step4Text')}</p>
              </div>
            </div>

            <div class="timeline-item">
              <div class="timeline-number">5</div>
              <div class="timeline-content">
                <h4>{t('penalties.step5Title')}</h4>
                <p>{t('penalties.step5Text')}</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Medidas Cautelares -->
        <section class="content-section">
          <div class="section-header">
            <i class="fas fa-shield-alt"></i>
            <h2>{t('penalties.precautionaryTitle')}</h2>
          </div>
          <p>{t('penalties.precautionaryIntro')}</p>
          <ul class="medidas-list">
            <li>
              <i class="fas fa-check-circle"></i>
              <strong>{t('penalties.measure1Title')}</strong> {t('penalties.measure1Text')}
            </li>
            <li>
              <i class="fas fa-check-circle"></i>
              <strong>{t('penalties.measure2Title')}</strong> {t('penalties.measure2Text')}
            </li>
            <li>
              <i class="fas fa-check-circle"></i>
              <strong>{t('penalties.measure3Title')}</strong> {t('penalties.measure3Text')}
            </li>
            <li>
              <i class="fas fa-check-circle"></i>
              <strong>{t('penalties.measure4Title')}</strong> {t('penalties.measure4Text')}
            </li>
          </ul>
        </section>

        <!-- Cómo Evitar Sanciones -->
        <section class="content-section">
          <div class="section-header">
            <i class="fas fa-lightbulb"></i>
            <h2>{t('penalties.avoidTitle')}</h2>
          </div>

          <div class="tips-grid">
            <div class="tip-card">
              <div class="tip-icon">
                <i class="fas fa-calendar-check"></i>
              </div>
              <h4>{t('penalties.tip1Title')}</h4>
              <p>{t('penalties.tip1Text')}</p>
            </div>

            <div class="tip-card">
              <div class="tip-icon">
                <i class="fas fa-users"></i>
              </div>
              <h4>{t('penalties.tip2Title')}</h4>
              <p>{t('penalties.tip2Text')}</p>
            </div>

            <div class="tip-card">
              <div class="tip-icon">
                <i class="fas fa-file-alt"></i>
              </div>
              <h4>{t('penalties.tip3Title')}</h4>
              <p>{t('penalties.tip3Text')}</p>
            </div>

            <div class="tip-card">
              <div class="tip-icon">
                <i class="fas fa-sync-alt"></i>
              </div>
              <h4>{t('penalties.tip4Title')}</h4>
              <p>{t('penalties.tip4Text')}</p>
            </div>

            <div class="tip-card">
              <div class="tip-icon">
                <i class="fas fa-handshake"></i>
              </div>
              <h4>{t('penalties.tip5Title')}</h4>
              <p>{t('penalties.tip5Text')}</p>
            </div>

            <div class="tip-card">
              <div class="tip-icon">
                <i class="fas fa-phone"></i>
              </div>
              <h4>{t('penalties.tip6Title')}</h4>
              <p>{t('penalties.tip6Text')}</p>
            </div>
          </div>
        </section>
      </div>

      <!-- Sidebar -->
      <div class="col-lg-4">
        <!-- Contacto Urgente -->
        <div class="sidebar-card urgente">
          <div class="card-icon">
            <i class="fas fa-phone-volume"></i>
          </div>
          <h3>{t('penalties.notificationQuestion')}</h3>
          <div class="contact-info">
            <p><i class="fas fa-phone"></i> <strong>(+240) 333 092214</strong></p>
          </div>
        </div>

        <!-- Enlaces Útiles -->
        <div class="sidebar-card">
          <h3><i class="fas fa-link"></i> {t('penalties.usefulLinks')}</h3>
          <ul class="link-list">
            <li><a href={getLocalizedPath('/afiliacionee_trabajadores', lang)}><i class="fas fa-chevron-right"></i> {t('penalties.linkAffiliation')}</a></li>
            <li><a href={getLocalizedPath('/descarga_formularios', lang)}><i class="fas fa-chevron-right"></i> {t('penalties.linkForms')}</a></li>
            <li><a href={getLocalizedPath('/contacto', lang)}><i class="fas fa-chevron-right"></i> {t('penalties.linkContact')}</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Nuestros Socios -->
  <PartnersCarousel socios={socios} />
</BaseLayout>

<style>
  /* Page Header */
  .full-title {
    background: linear-gradient(135deg, #8c1b12 0%, #6d2018 100%);
    padding: 3rem 0;
    color: white;
  }

  .text_blanc {
    color: white;
    font-size: 42px;
    font-weight: 700;
    margin: 0;
  }

  .breadcrumb {
    background: transparent;
    padding: 0;
    margin: 0;
  }

  .breadcrumb-item a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
  }

  .breadcrumb-item a:hover {
    color: white;
  }

  .breadcrumb-item.active {
    color: white;
  }

  .breadcrumb-item + .breadcrumb-item::before {
    color: rgba(255, 255, 255, 0.6);
  }

  /* Content Sections */
  .content-section {
    background: white;
    padding: 2.5rem;
    margin-bottom: 2rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 3px solid #8c1b12;
  }

  .section-header i {
    font-size: 32px;
    color: #8c1b12;
  }

  .section-header h2 {
    margin: 0;
    font-size: 28px;
    font-weight: 700;
    color: #333;
  }

  .lead {
    font-size: 18px;
    font-weight: 500;
    color: #555;
    line-height: 1.7;
  }

  /* Infraction Cards */
  .infraction-card {
    margin-bottom: 1.5rem;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .infraction-header {
    padding: 1.5rem;
    color: white;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .infraction-header.leve {
    background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
  }

  .infraction-header.grave {
    background: linear-gradient(135deg, #ff9800 0%, #ff5722 100%);
  }

  .infraction-header.muy-grave {
    background: linear-gradient(135deg, #f44336 0%, #c62828 100%);
  }

  .infraction-header i {
    font-size: 28px;
  }

  .infraction-header h3 {
    margin: 0;
    font-size: 22px;
    font-weight: 700;
  }

  .infraction-body {
    padding: 1.5rem;
    background: white;
  }

  .infraction-body ul {
    margin-bottom: 1.5rem;
  }

  .infraction-body li {
    margin-bottom: 0.75rem;
    line-height: 1.6;
  }

  .sancion-info {
    background: #f5f5f5;
    padding: 1rem 1.5rem;
    border-left: 4px solid #8c1b12;
    border-radius: 4px;
    font-size: 16px;
  }

  /* Mora Table */
  .mora-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
  }

  .mora-table thead {
    background: #8c1b12;
    color: white;
  }

  .mora-table th,
  .mora-table td {
    padding: 1rem 1.5rem;
    text-align: left;
    border: 1px solid #e0e0e0;
  }

  .mora-table tbody tr:nth-child(even) {
    background: #f9f9f9;
  }

  .mora-table tbody tr:hover {
    background: #f0f0f0;
  }

  /* Alert Warning */
  .alert-warning {
    background: #fff3cd;
    border-left: 4px solid #ffc107;
    padding: 1.25rem;
    border-radius: 8px;
    margin-top: 1.5rem;
  }

  .alert-warning i {
    color: #ff9800;
    margin-right: 10px;
  }

  /* Timeline */
  .proceso-timeline {
    position: relative;
    padding-left: 60px;
  }

  .proceso-timeline::before {
    content: '';
    position: absolute;
    left: 20px;
    top: 0;
    bottom: 0;
    width: 3px;
    background: #e0e0e0;
  }

  .timeline-item {
    position: relative;
    margin-bottom: 2.5rem;
  }

  .timeline-number {
    position: absolute;
    left: -60px;
    top: 0;
    width: 40px;
    height: 40px;
    background: #8c1b12;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 18px;
    box-shadow: 0 2px 8px rgba(140, 27, 18, 0.3);
  }

  .timeline-content h4 {
    color: #8c1b12;
    font-weight: 700;
    margin-bottom: 0.5rem;
  }

  .timeline-content p {
    color: #666;
    margin: 0;
  }

  /* Medidas List */
  .medidas-list {
    list-style: none;
    padding: 0;
  }

  .medidas-list li {
    padding: 1rem;
    margin-bottom: 1rem;
    background: #f9f9f9;
    border-left: 4px solid #8c1b12;
    border-radius: 4px;
  }

  .medidas-list i {
    color: #217346;
    margin-right: 10px;
  }

  /* Tips Grid */
  .tips-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
    margin-top: 1.5rem;
  }

  .tip-card {
    background: #f9f9f9;
    padding: 1.5rem;
    border-radius: 12px;
    text-align: center;
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }

  .tip-card:hover {
    background: white;
    border-color: #8c1b12;
    transform: translateY(-5px);
    box-shadow: 0 4px 12px rgba(140, 27, 18, 0.15);
  }

  .tip-icon {
    width: 60px;
    height: 60px;
    background: #8c1b12;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem;
    font-size: 24px;
  }

  .tip-card h4 {
    color: #333;
    font-weight: 700;
    margin-bottom: 0.75rem;
  }

  .tip-card p {
    color: #666;
    font-size: 14px;
    margin: 0;
  }

  /* Sidebar */
  .sidebar-card {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    margin-bottom: 2rem;
  }

  .sidebar-card.urgente {
    background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
    border: 2px solid #ef5350;
  }

  .sidebar-card h3 {
    font-size: 20px;
    font-weight: 700;
    color: #333;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .card-icon {
    text-align: center;
    margin-bottom: 1.5rem;
  }

  .card-icon i {
    font-size: 48px;
    color: #f44336;
  }

  .contact-info {
    background: white;
    padding: 1.25rem;
    border-radius: 8px;
    margin: 1rem 0;
  }

  .contact-info p {
    margin: 0.5rem 0;
    font-size: 16px;
  }

  .contact-info i {
    color: #8c1b12;
    margin-right: 8px;
  }

  .link-list {
    list-style: none;
    padding: 0;
  }

  .link-list li {
    margin-bottom: 0.75rem;
  }

  .link-list a {
    color: #333;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 0.75rem;
    border-radius: 6px;
    transition: all 0.3s ease;
  }

  .link-list a:hover {
    background: #f5f5f5;
    color: #8c1b12;
    padding-left: 1rem;
  }

  .link-list i {
    color: #8c1b12;
    font-size: 12px;
  }

  /* Responsive */
  @media (max-width: 991px) {
    .tips-grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 767px) {
    .text_blanc {
      font-size: 32px;
    }

    .content-section {
      padding: 1.5rem;
    }

    .section-header h2 {
      font-size: 24px;
    }

    .proceso-timeline {
      padding-left: 50px;
    }

    .timeline-number {
      left: -50px;
      width: 35px;
      height: 35px;
      font-size: 16px;
    }
  }
</style>
